<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DFDA High-Density Pro</title>
    <style>
        :root { --navy: #1a3a5f; --law: #b22222; --nt: #d5763e; --cth: #444; }
        body { font-family: -apple-system, sans-serif; background: #f0f2f5; margin: 0; padding: 0; color: #333; }
        .header { position: sticky; top: 0; z-index: 9; background: var(--navy); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .nav { display: flex; }
        .tab { flex: 1; padding: 15px 5px; color: #fff; text-align: center; cursor: pointer; font-size: 11px; font-weight: bold; text-transform: uppercase; border-bottom: 4px solid transparent; }
        .tab.active { border-bottom: 4px solid var(--nt); background: rgba(255,255,255,0.1); }
        .container { max-width: 700px; margin: auto; padding: 15px; }
        .search-box { width: 100%; padding: 15px; border: 2px solid #ccc; border-radius: 10px; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; }
        .card { background: white; margin-bottom: 12px; border-radius: 8px; overflow: hidden; border-left: 6px solid var(--navy); box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card.offence { border-left-color: var(--law); }
        .card.cth { border-left-color: var(--cth); }
        .card-h { padding: 10px 15px; background: #f8f9fa; font-weight: bold; display: flex; justify-content: space-between; font-size: 14px; }
        .card-b { padding: 15px; font-size: 13px; line-height: 1.5; }
        .proof { display: block; margin-top: 10px; padding: 10px; background: #fdfdfd; border: 1px solid #eee; border-radius: 4px; color: #000; }
        .nt-map { border-left: 4px solid var(--nt); background: #fff4ed; padding: 10px; margin-top: 5px; }
        .badge { font-size: 9px; padding: 2px 6px; border-radius: 4px; color: #fff; text-transform: uppercase; }
        .hidden { display: none !important; }
        hr { border: 0; border-top: 1px solid #eee; margin: 10px 0; }
    </style>
</head>
<body>

<div class="header">
    <div class="nav">
        <div id="t-leg" class="tab active" onclick="nav('leg')">Legislation</div>
        <div id="t-map" class="tab" onclick="nav('map')">NT Mapping</div>
        <div id="t-sam" class="tab" onclick="nav('sam')">SAMDF</div>
    </div>
</div>

<div class="container">
    <div id="v-leg">
        <input type="text" class="search-box" id="si" oninput="render()" placeholder="Search DFDA or Crimes Act...">
        <div id="out"></div>
    </div>

    <div id="v-map" class="hidden">
        <div class="card"><div class="card-b">
            <h3>NT â†’ ADF Equivalent</h3>
            <div id="map-out"></div>
        </div></div>
    </div>

    <div id="v-sam" class="hidden">
        <div class="card" style="border-left-color: var(--navy);">
            <div class="card-h">DPA Powers (Part VIA)</div>
            <div class="card-b">
                <strong>s72P Identity Demand:</strong> Must state "I am a defense member..." and request Name, Address, and Reason for presence.<br><hr>
                <strong>s72R Search:</strong> Authorized for security of DPA. Includes vehicles and outer clothing.<br><hr>
                <strong>s89A Crimes Act:</strong> Summary arrest power for trespassers. Must handover to NT Police ASAP.
            </div>
        </div>
    </div>
</div>

<script>
// JSON DATABASE - Optimized for Space
const db = [
    {s:"s22", t:"Abandoning Post", c:"offence", d:"Leaving post/guard w/o relief.", p:"Prove: (1) Assigned duty; (2) Left post; (3) No auth. Threshold: Specific Post Orders are primary evidence."},
    {s:"s23", t:"Desertion", c:"offence", d:"Absence with intent to stay away.", p:"Prove: (1) Absence; (2) Intent to desert (via kit disposal/statements). Threshold: Permanent intent required."},
    {s:"s24", t:"AWOL", c:"offence", d:"Unauthorized absence.", p:"Prove: (1) Absent; (2) No leave pass. Threshold: STRICT LIABILITY. No intent needed."},
    {s:"s26", t:"Assaulting Superior", c:"offence", d:"Violence to superior rank.", p:"Prove: (1) Force/Threat; (2) Superior rank; (3) Knowledge of status. Threshold: Rank disparity must be known."},
    {s:"s28", t:"Disobeying Command", c:"offence", d:"Intentional failure to obey.", p:"Prove: (1) Lawful command; (2) Specific/Clear; (3) Disobedience. Threshold: Must relate to military duty."},
    {s:"s31", t:"Obstructing SP", c:"offence", d:"Resisting Service Police.", p:"Prove: (1) Hindrance; (2) SP in execution of duty. Threshold: SP must be acting within legal powers (Intra Vires)."},
    {s:"s32", t:"Disorderly Conduct", c:"offence", d:"Fighting/Threats on base.", p:"Prove: Conduct likely to prejudice discipline. Threshold: Lower bar than civilian breach of peace."},
    {s:"s37", t:"Stealing", c:"offence", d:"Theft of Service property.", p:"Prove: (1) Appropriation; (2) Intent to permanently deprive. Threshold: Property must belong to Cth/ADF."},
    {s:"s40", t:"DUI", c:"offence", d:"Impaired driving (Service Veh).", p:"Prove: (1) Operating veh; (2) Impairment. Threshold: 'Incapable of proper control.'"},
    {s:"s40C", t:"Drug Presence", c:"offence", d:"Driving with drug in system.", p:"Prove: Positive result (Oral/Blood). Threshold: STRICT LIABILITY. No impairment proof required."},
    {s:"s60", t:"Prejudicial Conduct", c:"offence", d:"Conduct harming good order.", p:"Threshold: SERVICE CONNECTION must be articulated. How does this hurt ADF discipline or reputation?"},
    {s:"s89", t:"Arrest Power (DFDA)", c:"power", d:"SP Arrest w/o warrant.", p:"Threshold: REASONABLE BELIEF. Must caution and state grounds immediately."},
    {s:"Crimes s89", t:"Trespass (Cth)", c:"cth", d:"Unlawful entry to Cth land.", p:"Prove: (1) Cth Land; (2) Entry. Threshold: Onus shifts to defendant to prove Lawful Excuse."},
    {s:"Crimes s89A", t:"Weapons (Cth)", c:"cth", d:"Weapons on Cth land.", p:"Prove: (1) Cth Land; (2) Weapon/Explosive. Threshold: Federal offence for any unauthorized weapon on base."}
];

const ntMap = [
    {n:"Common Assault (s188 CC)", a:"DFDA s26 (if Superior) or s30/33", d:"NT law is broader; DFDA requires specific rank relationship."},
    {n:"Disorderly (s47 SOA)", a:"DFDA s32", d:"Used for fights/swearing in public or on base."},
    {n:"Stealing (s210 CC)", a:"DFDA s37", d:"ADF s37 only for Service Property; use NT law for civilian property."},
    {n:"DUI (s29 Traffic Act)", a:"DFDA s40", d:"SP has jurisdiction over Service Vehicles; NT Police for civilian vehicles."},
    {n:"Trespass (s5 Trespass Act)", a:"Crimes Act s89", d:"Crimes Act s89 is more powerful on federal land than NT Trespass Act."}
];

function nav(id) {
    ['v-leg', 'v-map', 'v-sam'].forEach(v => document.getElementById(v).classList.add('hidden'));
    ['t-leg', 't-map', 't-sam'].forEach(t => document.getElementById(t).classList.remove('active'));
    document.getElementById('v-'+id).classList.remove('hidden');
    document.getElementById('t-'+id).classList.add('active');
    if(id==='map') renderMap();
}

function render() {
    const q = document.getElementById('si').value.toLowerCase();
    const out = document.getElementById('out');
    out.innerHTML = '';
    db.filter(x => x.s.toLowerCase().includes(q) || x.t.toLowerCase().includes(q)).forEach(x => {
        out.innerHTML += `<div class="card ${x.c}"><div class="card-h"><span>${x.s}</span><span class="badge" style="background:var(--${x.c==='offence'?'law':(x.c==='cth'?'cth':'navy')})">${x.c}</span></div><div class="card-b"><b>${x.t}</b><br>${x.d}<div class="proof"><b>Elements & Thresholds:</b><br>${x.p}</div></div></div>`;
    });
}

function renderMap() {
    const out = document.getElementById('map-out');
    out.innerHTML = '';
    ntMap.forEach(m => {
        out.innerHTML += `<div class="nt-map"><strong>NT: ${m.n}</strong><br><b>ADF:</b> ${m.a}<br><small>${m.d}</small></div><hr>`;
    });
}

window.onload = render;
</script>
</body>
</html>
