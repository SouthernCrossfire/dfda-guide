<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DFDA & Crimes Act Field Pro</title>
    <style>
        :root { --army: #4b5320; --navy: #1a3a5f; --law: #b22222; --nt: #d5763e; --cth: #555; }
        body { font-family: -apple-system, sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
        .header-nav { position: sticky; top: 0; z-index: 999; background: var(--navy); box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        .tab-bar { display: flex; overflow-x: auto; white-space: nowrap; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .tab { flex: 0 0 auto; padding: 14px 20px; text-align: center; color: #fff; cursor: pointer; font-weight: bold; font-size: 10px; border-bottom: 4px solid transparent; text-transform: uppercase; }
        .tab.active { border-bottom: 4px solid var(--nt); background: rgba(255,255,255,0.1); }
        .container { max-width: 700px; margin: auto; padding: 15px; padding-bottom: 80px; }
        .search-box { width: 100%; padding: 15px; border: 2px solid #ccc; border-radius: 10px; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; }
        .card { background: white; margin-bottom: 15px; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 8px solid var(--army); }
        .card.offence { border-left-color: var(--law); }
        .card.cth-offence { border-left-color: var(--cth); }
        .card-header { padding: 12px 15px; background: #f8f9fa; border-bottom: 1px solid #eee; font-weight: bold; color: var(--navy); display: flex; justify-content: space-between; }
        .card-body { padding: 15px; font-size: 14px; line-height: 1.5; color: #333; }
        .legal-detail { color: #444; font-style: italic; margin-top: 8px; display: block; border-top: 1px solid #ddd; padding-top: 8px; background: #fafafa; padding: 10px; border-radius: 4px; }
        .badge { color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px; text-transform: uppercase; }
        .bg-law { background: var(--law); }
        .bg-cth { background: var(--cth); }
        textarea { width: 100%; margin-top: 10px; border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fffdf0; box-sizing: border-box; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
<div class="header-nav"><div class="tab-bar">
    <div id="t-ref" class="tab active" onclick="nav('ref')">LEGISLATION REF</div>
    <div id="t-nt" class="tab" onclick="nav('nt')">NT POLICE</div>
    <div id="t-log" class="tab" onclick="nav('log')">LOGS</div>
</div></div>
<div class="container">
    <div id="v-ref">
        <input type="text" class="search-box" id="searchInp" oninput="runSearch()" placeholder="Search Section (e.g. s24, Crimes s89)...">
        <div id="searchRes"></div>
    </div>
</div>
<script>
const data = [
    // ... all previous DFDA sections (22-89) ...
    {s:"Crimes s89", title:"Trespassing on Cth Land", cat:"cth-offence", desc:"Entering or remaining on Commonwealth land without lawful excuse.", legal:"ELEMENTS: (1) Land is prohibited/Commonwealth land; (2) Subject entered/remained; (3) No lawful excuse (onus on defendant). Max: 10 penalty units."},
    {s:"Crimes s89A", title:"Prohibited Weapons (Cth Land)", cat:"cth-offence", desc:"Possession of a firearm or prohibited weapon on Commonwealth land.", legal:"ELEMENTS: (1) Land is Cth property; (2) Subject in possession of firearm/weapon/explosive; (3) No lawful authority/excuse. Max: 6 months jail."}
];

// Re-including the s89/s89A DFDA entries for comparison in search
data.push({s:"DFDA s89", title:"Arrest without Warrant", cat:"power", desc:"Service Police power of arrest for service offences.", legal:"THRESHOLD: Reasonable belief of service offence. Objective grounds."});
data.push({s:"DFDA s89A", title:"Arrest of Trespassers", cat:"power", desc:"Power to arrest civilians found trespassing on Defence premises.", legal:"THRESHOLD: Found on premises without authority. Must deliver to civil police ASAP."});

function nav(id) {
    ['v-ref', 'v-nt', 'v-log'].forEach(v => { if(document.getElementById(v)) document.getElementById(v).classList.add('hidden'); });
    if(document.getElementById('v-' + id)) document.getElementById('v-' + id).classList.remove('hidden');
    ['t-ref', 't-nt', 't-log'].forEach(t => document.getElementById(t).classList.remove('active'));
    document.getElementById('t-' + id).classList.add('active');
}

function runSearch() {
    const q = document.getElementById('searchInp').value.toLowerCase().trim();
    const out = document.getElementById('searchRes');
    out.innerHTML = '';
    data.filter(i => i.s.toLowerCase().includes(q) || i.title.toLowerCase().includes(q))
        .forEach(i => {
            const noteVal = localStorage.getItem('n-'+i.s) || '';
            const badgeClass = i.cat === 'cth-offence' ? 'bg-cth' : 'bg-law';
            out.innerHTML += `
                <div class="card ${i.cat}">
                    <div class="card-header"><span>${i.s}</span> <span class="badge ${badgeClass}">${i.cat}</span></div>
                    <div class="card-body">
                        <strong>${i.title}</strong><br>${i.desc}
                        <span class="legal-detail">${i.legal}</span>
                        <textarea placeholder="Notes..." oninput="localStorage.setItem('n-${i.s}', this.value)">${noteVal}</textarea>
                    </div>
                </div>`;
        });
}
window.onload = runSearch;
</script>
</body>
</html>
